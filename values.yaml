# =============================================================================
# Файл конфигурации для развертывания ClickHouse в Kubernetes
# =============================================================================
# Этот файл содержит все параметризованные значения для настройки ClickHouse.
# Измените значения в соответствии с вашими требованиями.

# -----------------------------------------------------------------------------
# Настройки ClickHouse
# -----------------------------------------------------------------------------
clickhouse:
  # Версия образа ClickHouse
  # Можно указать конкретную версию (например, "24.3", "23.8", "latest")
  # Рекомендуется использовать конкретную версию для стабильности
  version: "24.3"
  
  # Количество реплик ClickHouse
  # Для production рекомендуется минимум 2-3 реплики
  replicas: 1
  
  # Namespace для развертывания
  namespace: "default"
  
  # Размер хранилища для данных
  # Укажите в соответствии с ожидаемым объемом данных
  storageSize: "10Gi"
  
  # StorageClass для PersistentVolume
  # Оставьте пустым для использования default StorageClass
  storageClass: ""

# -----------------------------------------------------------------------------
# Настройки ресурсов (CPU и Memory)
# -----------------------------------------------------------------------------
resources:
  # Ограничения ресурсов для пода
  limits:
    cpu: "2000m"      # 2 CPU
    memory: "4Gi"     # 4 GB RAM
  
  # Запрашиваемые ресурсы
  requests:
    cpu: "1000m"      # 1 CPU
    memory: "2Gi"     # 2 GB RAM

# -----------------------------------------------------------------------------
# Пользователи ClickHouse
# -----------------------------------------------------------------------------
# Список пользователей с их паролями и правами доступа
# ВАЖНО: Для production используйте Kubernetes Secrets!
users:
  # Администратор с полными правами
  - name: "admin"
    password: "SecurePassword123!"
    # Сети, с которых разрешен доступ (по умолчанию - все)
    networks: "::/0"
    # Профиль пользователя (default - стандартный)
    profile: "default"
    # Квота использования ресурсов
    quota: "default"
  
  # Пользователь только для чтения
  - name: "readonly"
    password: "ReadOnlyPass456!"
    networks: "::/0"
    profile: "readonly"
    quota: "default"
  
  # Пользователь для приложений
  - name: "app_user"
    password: "AppUserPass789!"
    networks: "::/0"
    profile: "default"
    quota: "default"

# -----------------------------------------------------------------------------
# Настройки сервиса
# -----------------------------------------------------------------------------
service:
  # Тип сервиса: ClusterIP, NodePort, LoadBalancer
  type: "ClusterIP"
  
  # Порты для доступа к ClickHouse
  ports:
    # Native protocol (используется clickhouse-client)
    native: 9000
    # HTTP interface (используется для HTTP запросов)
    http: 8123
    # Interserver communication
    interserver: 9009

# -----------------------------------------------------------------------------
# Настройки ClickHouse сервера
# -----------------------------------------------------------------------------
config:
  # Уровень логирования: trace, debug, information, warning, error
  logLevel: "information"
  
  # Максимальное количество потоков для обработки запросов
  maxThreads: 8
  
  # Максимальный размер памяти для обработки запроса (в байтах)
  maxMemoryUsage: 10000000000  # 10 GB
  
  # Часовой пояс сервера
  timezone: "Europe/Moscow"
